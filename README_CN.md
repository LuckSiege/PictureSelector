# PictureSelector 2.0
   ä¸€æ¬¾é’ˆå¯¹Androidå¹³å°ä¸‹çš„å›¾ç‰‡é€‰æ‹©å™¨ï¼Œæ”¯æŒä»ç›¸å†Œè·å–å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘&æ‹ç…§ï¼Œæ”¯æŒè£å‰ª(å•å›¾orå¤šå›¾è£å‰ª)ã€å‹ç¼©ã€ä¸»é¢˜è‡ªå®šä¹‰é…ç½®ç­‰åŠŸèƒ½ï¼Œæ”¯æŒåŠ¨æ€è·å–æƒé™&é€‚é…Android 5.0+ç³»ç»Ÿçš„å¼€æºå›¾ç‰‡é€‰æ‹©æ¡†æ¶ã€‚<br>
   
   [è‹±æ–‡ç‰ˆğŸ‡ºğŸ‡¸](README.md)
 
   [æˆ‘çš„åšå®¢åœ°å€](http://blog.csdn.net/luck_mw)   
  
   [ä½“éªŒDemo](https://github.com/LuckSiege/PictureSelector/raw/master/app/demo/demo_2021-11-03_075835_v2.7.3-rc09.apk)<br>
  
[![](https://jitpack.io/v/LuckSiege/PictureSelector.svg)](https://jitpack.io/#LuckSiege/PictureSelector)
[![PRs Welcome](https://img.shields.io/badge/PRs-Welcome-brightgreen.svg)](https://github.com/LuckSiege)
[![CSDN](https://img.shields.io/twitter/url/http/blog.csdn.net/luck_mw.svg?style=social)](http://blog.csdn.net/luck_mw)
[![I](https://img.shields.io/github/issues/LuckSiege/PictureSelector.svg)](https://github.com/LuckSiege/PictureSelector/issues)
[![Star](https://img.shields.io/github/stars/LuckSiege/PictureSelector.svg)](https://github.com/LuckSiege/PictureSelector)

## ç›®å½•
-[ç”¨å‰éœ€çŸ¥](https://github.com/LuckSiege/PictureSelector/wiki/%E7%94%A8%E5%89%8D%E9%9C%80%E7%9F%A5)<br>
-[é›†æˆä½¿ç”¨](#é›†æˆä½¿ç”¨)<br>
-[å¦‚ä½•æIssues?](https://github.com/LuckSiege/PictureSelector/wiki/%E5%A6%82%E4%BD%95%E6%8F%90Issues%3F)<br>
-[åŠŸèƒ½ç‰¹ç‚¹](https://github.com/LuckSiege/PictureSelector/wiki/%E5%8A%9F%E8%83%BD%E7%89%B9%E7%82%B9)<br>
-[PictureSelectorè·¯å¾„è¯´æ˜](https://github.com/LuckSiege/PictureSelector/wiki/PictureSelector-%E8%B7%AF%E5%BE%84%E8%AF%B4%E6%98%8E)<br>
-[æ›´æ–°æ—¥å¿—](https://github.com/LuckSiege/PictureSelector/releases/tag/v2.7.3-rc09)<br>
-[ä¸»é¢˜é…ç½®-Xmlæ–¹å¼](https://github.com/LuckSiege/PictureSelector/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98-Xml%E6%96%B9%E5%BC%8F)<br>
-[ä¸»é¢˜é…ç½®-Codeæ–¹å¼](https://github.com/LuckSiege/PictureSelector/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E6%80%81%E4%B8%BB%E9%A2%98(%E5%8C%85%E5%90%AB%E8%A3%81%E5%89%AA%E3%80%81%E7%9B%B8%E5%86%8C%E5%90%AF%E5%8A%A8%E5%8A%A8%E7%94%BB)-Code%E6%96%B9%E5%BC%8F)<br>
-[æ¼”ç¤ºæ•ˆæœ](#æ¼”ç¤ºæ•ˆæœ)<br>
-[Apiè¯´æ˜](https://github.com/LuckSiege/PictureSelector/wiki/PictureSelector-Api%E8%AF%B4%E6%98%8E)<br>
-[å¯åŠ¨ç›¸å†Œ](#å¯åŠ¨ç›¸å†Œ)<br>
-[å•ç‹¬æ‹ç…§](#å•ç‹¬æ‹ç…§)<br>
-[è‡ªå®šä¹‰ç›¸æœº](#è‡ªå®šä¹‰ç›¸æœº)<br>
-[ç»“æœå›è°ƒ](https://github.com/LuckSiege/PictureSelector/wiki/%E7%BB%93%E6%9E%9C%E5%9B%9E%E8%B0%83)<br>
-[å¸¸è§é”™è¯¯](https://github.com/LuckSiege/PictureSelector/wiki/%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF)<br>
-[ç¼“å­˜æ¸…é™¤](#ç¼“å­˜æ¸…é™¤)<br>
-[æ··æ·†é…ç½®](#æ··æ·†é…ç½®)<br>
-[License](#License)<br>
-[å…¼å®¹æ€§æµ‹è¯•](#å…¼å®¹æ€§æµ‹è¯•)<br>
-[è”ç³»æ–¹å¼](#è”ç³»æ–¹å¼)<br>




## é›†æˆä½¿ç”¨

```sh
repositories {
  google()
  mavenCentral()
}

dependencies {
  implementation 'io.github.lucksiege:pictureselector:v2.7.3-rc09'
}
```

Or Maven:

```sh
<dependency>
  <groupId>io.github.lucksiege</groupId>
  <artifactId>pictureselector</artifactId>
  <version>v2.7.3-rc09</version>
</dependency>
```

## å¯åŠ¨ç›¸å†Œ
å¿«æ·è°ƒç”¨ï¼Œæ›´å¤šåŠŸèƒ½ [è¯·æŸ¥çœ‹](https://github.com/LuckSiege/PictureSelector/wiki/PictureSelector-Api%E8%AF%B4%E6%98%8E)

1ã€onActivityResult
```sh 
 PictureSelector.create(this)
   .openGallery(PictureMimeType.ofImage())
   .imageEngine(GlideEngine.createGlideEngine()) // è¯·å‚è€ƒDemo GlideEngine.java
   .forResult(PictureConfig.CHOOSE_REQUEST);
   
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
                case PictureConfig.CHOOSE_REQUEST:
                    // ç»“æœå›è°ƒ
                    List<LocalMedia> result = PictureSelector.obtainMultipleResult(data);
                    break;
                default:
                    break;
            }            
        }
```

2ã€Callback
```sh
 PictureSelector.create(this)
   .openGallery(PictureMimeType.ofAll())
   .imageEngine(GlideEngine.createGlideEngine())
   .forResult(new OnResultCallbackListener<LocalMedia>() {
       @Override
       public void onResult(List<LocalMedia> result) {
            // ç»“æœå›è°ƒ
       }

       @Override
       public void onCancel() {
            // å–æ¶ˆ
       }
     });  
```

## å•ç‹¬æ‹ç…§
å¿«æ·è°ƒç”¨ï¼Œå•ç‹¬å¯åŠ¨æ‹ç…§æˆ–è§†é¢‘ æ ¹æ®PictureMimeTypeè‡ªåŠ¨è¯†åˆ« æ›´å¤šåŠŸèƒ½ [è¯·æŸ¥çœ‹](https://github.com/LuckSiege/PictureSelector/wiki/PictureSelector-Api%E8%AF%B4%E6%98%8E)

onActivityResult
```sh
 PictureSelector.create(this)
   .openCamera(PictureMimeType.ofImage())
   .imageEngine(GlideEngine.createGlideEngine()) // è¯·å‚è€ƒDemo GlideEngine.java
   .forResult(PictureConfig.REQUEST_CAMERA);Â  
   
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
                case PictureConfig.REQUEST_CAMERA:
                    // ç»“æœå›è°ƒ
                    List<LocalMedia> result = PictureSelector.obtainMultipleResult(data);
                    break;
                default:
                    break;
            }            
        }
```

Callback
```sh
PictureSelector.create(this)
   .openCamera(PictureMimeType.ofImage())
   .imageEngine(GlideEngine.createGlideEngine())
   .forResult(new OnResultCallbackListener<LocalMedia>() {
       @Override
       public void onResult(List<LocalMedia> result) {
            // ç»“æœå›è°ƒ
       }

       @Override
       public void onCancel() {
            // å–æ¶ˆ
       }
     });
```

## è‡ªå®šä¹‰ç›¸æœº
å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰ç›¸æœºéœ€è¦è®¾ç½®
```
.isUseCustomCamera(true);
```
Applicationä¸‹å®ç°å¦‚ä¸‹æ¥å£
```sh
 public class App extends Application implements CameraXConfig.Provider {
    private static final String TAG = App.class.getSimpleName();

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @NonNull
    @Override
    public CameraXConfig getCameraXConfig() {
        return Camera2Config.defaultConfig();
    }
 }
```

## ç¼“å­˜æ¸…é™¤
```sh
 //åŒ…æ‹¬è£å‰ªå’Œå‹ç¼©åçš„ç¼“å­˜ï¼Œè¦åœ¨ä¸Šä¼ æˆåŠŸåè°ƒç”¨ï¼Œtype æŒ‡çš„æ˜¯å›¾ç‰‡orè§†é¢‘ç¼“å­˜å–å†³äºä½ è®¾ç½®çš„ofImageæˆ–ofVideo æ³¨æ„ï¼šéœ€è¦ç³»ç»Ÿsdå¡æƒé™  
 PictureCacheManager.deleteCacheDirFile(this,type);
 // æ¸…é™¤æ‰€æœ‰ç¼“å­˜ ä¾‹å¦‚ï¼šå‹ç¼©ã€è£å‰ªã€è§†é¢‘ã€éŸ³é¢‘æ‰€ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶
 PictureCacheManager.deleteAllCacheDirFile(this);
 // æ¸…é™¤ç¼“å­˜ä¸”åˆ·æ–°å›¾åº“
 PictureCacheManager.deleteAllCacheDirRefreshFile(this);
 // æ¸…é™¤ç¼“å­˜ä¸”åˆ·æ–°å›¾åº“
 PictureCacheManager.deleteAllCacheDirFile(this, new OnCallbackListener<String>() {
            @Override
            public void onCall(String absolutePath) {
                // æ¸…ç©ºç¼“å­˜å¹¶åˆ·æ–°ç›¸å†Œ
            }
        });
```
 
## é¢„è§ˆå›¾ç‰‡ 
```
// é¢„è§ˆå›¾ç‰‡ å¯è‡ªå®šé•¿æŒ‰ä¿å­˜è·¯å¾„
*æ³¨æ„ .themeStyle(R.style.theme)ï¼›é‡Œé¢çš„å‚æ•°ä¸å¯åˆ ï¼Œå¦åˆ™é—ªé€€...

PictureSelector.create(this)
 .themeStyle(R.style.picture_default_style)
 .isNotPreviewDownload(true)
 .imageEngine(GlideEngine.createGlideEngine()) // è¯·å‚è€ƒDemo GlideEngine.java
 .openExternalPreview(position, result);

```
## é¢„è§ˆè§†é¢‘
```sh
PictureSelector.create(this).externalPictureVideo(video_path);
```

## é¡¹ç›®ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“

* PhotoView
* luban
* ucrop

## æ··æ·†é…ç½® 
```sh
#PictureSelector 2.0
-keep class com.luck.picture.lib.** { *; }

#Ucrop
-dontwarn com.yalantis.ucrop**
-keep class com.yalantis.ucrop** { *; }
-keep interface com.yalantis.ucrop** { *; }


```
## License
```sh
   Copyright 2017 Luck

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
```

## è”ç³»æ–¹å¼
Androidå¼€å‘äº¤æµ æ–°ç¾¤ [662320389]() <br>
Androidå¼€å‘äº¤æµ ç¾¤ä¸€ [619458861]() (å·²æ»¡) <br>
Androidå¼€å‘äº¤æµ ç¾¤äºŒ [679824206]() (å·²æ»¡) <br>
Androidå¼€å‘äº¤æµ ç¾¤ä¸‰ [854136996]() (å·²æ»¡) <br>
QQ [893855882]() <br>


## å…¼å®¹æ€§æµ‹è¯•
******è…¾è®¯ä¼˜æµ‹-æ·±åº¦æµ‹è¯•-é€šè¿‡ç‡è¾¾åˆ°100%******

![image](https://github.com/LuckSiege/PictureSelector/blob/master/image/test.png)


## æ¼”ç¤ºæ•ˆæœ

| å•ä¸€æ¨¡å¼ | æ··é€‰æ¨¡å¼ |
|:-----------:|:-----------:|
|![](image/home.jpg)|![](image/home_mixed.jpg)| 

| é»˜è®¤é£æ ¼ | é¢„è§ˆ | å¤šå›¾è£å‰ª |
|:-----------:|:--------:|:---------:|
|![](image/picture_default_style_1.jpg) | <img src="image/picture_default_style_2.jpg"/> | ![](image/picture_default_style_new_3.jpg)|  

| æ•°å­—é£æ ¼ | é¢„è§ˆ | å¤šå›¾è£å‰ª |
|:-----------:|:--------:|:---------:|
|![](image/picture_num_style_new_1.jpg) | ![](image/picture_num_style_new_2.jpg) | ![](image/picture_num_style_new_3.jpg)| 

| ç™½è‰²é£æ ¼ | é¢„è§ˆ | å•å›¾è£å‰ª |
|:-----------:|:--------:|:---------:|
|![](image/picture_sina_style_1.jpg) | ![](image/picture_sina_style_new_2.jpg) | ![](image/picture_sina_style_new_3.jpg)| 

| å…¨æ–°é£æ ¼ | é¢„è§ˆ | å¤šå›¾è£å‰ª |
|:-----------:|:--------:|:---------:|
|![](image/picture_wechat_style_1.jpg) | ![](image/picture_wechat_style_2.jpg) | ![](image/picture_wechat_style_new_3.jpg)| 

| ç›¸å†Œç›®å½• | å•é€‰æ¨¡å¼ | å¤´åƒè£å‰ª|
|:-----------:|:--------:|:--------:|
|![](image/picture_wechat_album_style.jpg) |![](image/picture_wechat_single_style_3.jpg) | ![](image/picture_circular_crop_new_style.jpg)| 

| ç™½è‰²é£æ ¼ | è§†é¢‘ | éŸ³é¢‘ |
|:-----------:|:-----------:|:--------:|
|![](image/picture_white_style.jpeg) |![](image/picture_video.jpg) | ![](image/picture_audio.jpg)| 

